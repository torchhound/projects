<!DOCTYPE html>
<html>
	<head>
		<meta charset = "UTF-8">
		<title>badchat</title>
		<style>
			#chatContainer {width: 100%; text-align:center;}
		</style>
		<base href="http://torchhound.github.io/projects/">
	</head>
	<body>
		<div id = "chatContainer">
			<canvas id = "chatWindow" height = 300 width = 300 style = "border:3px solid #000000;">Error: Unsupported Browser</canvas>
			<canvas id = "userList" height = 300 width = 100 style = "border:3px solid #000000;">Error: Unsupported Browser</canvas>
			<form>
				Message: <input type = "text" name = "message">
				<input id = "send" type = "submit" value = "Send">
			</form>
		</div>
		<script>
			var userName = localStorage["userName"],
				users = {1:userName},
				currentMessage = "",
				messages = {1:"Welcome!"userName}, <!--//new vars for reformatted variables?-->
				messagesPointer = 1,
				chatBox = document.getElementById("chatWindow"),
				connection = new WebSocket("ws://http://torchhound.github.io/projects"),
				context = canvas.getContext("2d"),
				users = document.getElementById("userList"),
				
			send.addEventListener("click", send, false);
			
			function errorHandler(error){
					console.log('Error detected: ' + error);
			}
			
			function send() {
				connection.send(currentMessage);
				messages.messagesPointer = currentMessage;
				currentMessage = "";
				connection.onerror = errorHandler(error);
			}
				
			function update() {
				for (x in users) {
					<!--//append <BR>-->
				}
				for (x in messages) {
					<!--//append <BR>-->
				}
				function messageDeletion() { 
				//null
				}
				function receive() {
				
				}
			}
				
			function userListFn() {
				context.beginPath();
				context.fillText(users);
				context.closePath();
			}
			
			function chatWindowFn() {
				context.beginPath();
				context.fillText(messages);
				context.closePath();
			}
			
			function draw() {
				update();
				userListFn();
				chatWindowFn();
				window.requestAnimationFrame(draw);
			}
			
			draw();
		</script>
	</body>
</html>